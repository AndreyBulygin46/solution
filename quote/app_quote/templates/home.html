<!-- home.html -->
{% extends "base.html" %}
{% block title %}–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞{% endblock %}

{% block content %}
  {% if messages %}
    <div class="messages">
      {% for message in messages %}
        <div class="alert {{ message.tags }}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <div class="quote-card">
    {% if no_quotes_message %}
      <p>{{ no_quotes_message }}</p>
    {% else %}
      <p>"{{ quote.text }}"</p>
      <p>–ò—Å—Ç–æ—á–Ω–∏–∫: {{ quote.source }}</p>
      <p class="views">–ü—Ä–æ—Å–º–æ—Ç—Ä—ã: {{ view_count }}</p>
      <p class="author">–î–æ–±–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ—Ä–æ–º: {{ author }}</p>
      <p class="time">–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è: {{ create_at }}</p>
      <p>üëç {{ like_count }} | üëé {{ dislike_count }}</p>

      {% if has_voted %}
        <p style="color: red;">–í—ã —É–∂–µ –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª–∏</p>
      {% endif %}
      {% if user.is_authenticated %}
        <form method="post">
          {% csrf_token %}
          <button type="submit" name="vote" value="like">üëç –õ–∞–π–∫</button>
          <button type="submit" name="vote" value="dislike">üëé –î–∏–∑–ª–∞–π–∫</button>
        </form>
      {% endif %}

      {% if user.is_authenticated and user == quote.author %}
        <form action="{% url 'delete_quote' quote.id %}" method="post">
          {% csrf_token %}
          <button 
          type="submit"
          onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É —Ü–∏—Ç–∞—Ç—É?')"
          >
          –£–¥–∞–ª–∏—Ç—å —Ü–∏—Ç–∞—Ç—É
          </button>
        </form>
      {% endif %}
    {% endif %}
  </div>
{% endblock %}
